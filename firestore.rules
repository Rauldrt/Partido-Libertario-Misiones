rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    // Regla para la configuración del sitio (banner, mosaico, etc.)
    match /site-config/{docId} {
      allow read: if true;
      // Permite la escritura si el usuario está autenticado O si el documento aún no existe (para la siembra inicial)
      allow write: if request.auth != null || !exists(/databases/$(database)/documents/site-config/$(docId));
    }

    // Regla para las noticias y eventos
    match /news/{newsId} {
      allow read: if true;
      // Permite la escritura si el usuario está autenticado O si el documento es nuevo (para la siembra inicial)
      allow write: if request.auth != null || !exists(/databases/$(database)/documents/news/$(newsId));
    }
  }
}
