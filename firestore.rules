
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
  
    // Reglas para colecciones gestionadas por el admin panel
    match /site-config/{docId} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    match /news/{docId} {
      allow read: if true;
      allow write: if true; // Permite escrituras desde el servidor (no autenticado)
    }

    // Reglas para colecciones de formularios públicos
    match /afiliaciones/{docId} {
      allow read: if request.auth != null; // Solo admins pueden leer
      allow create: if true; // Cualquiera puede enviar el formulario
    }

    match /fiscalizaciones/{docId} {
      allow read: if request.auth != null; // Solo admins pueden leer
      allow create: if true; // Cualquiera puede enviar el formulario
    }

    match /contactSubmissions/{docId} {
      allow read: if request.auth != null; // Solo admins pueden leer
      allow create: if true; // Cualquiera puede enviar el formulario
    }

    // Regla por defecto: denegar todo lo demás
    match /{document=**} {
      allow read, write: if false;
    }
  }
}
